# RBAC.github.io
一．RBAC
1. 介绍 
RBAC: role  base access  controller (基于角色的访问控制功能)

该权限控制器是用户与具体操作模块直接联系。
该方式权限设置好处：实现相对比较容易、用户的权限非常清晰。
              不好：权限设置“太具体”，管理员需要每天花大量的时间给“新增用户”设置权限，给“离职用户”取消权限。有时还需要给个别人员设置差异权限。

 
权限设置第二个阶段：
权限可以与组别直接对应
管理员-------->组---------->权限
 
基于组(角色)的权限设置，使得用户与组别直接联系、组别与权限直接对应
组别对应的具体的权限已经固化的信息
用户与组别的对应关系是动态的，需要管理员维护
该方式权限设置非常高效，管理员后期只需要知道用户是属于哪个组别的就可以。
2. 数据表设计
 
角色与权限是一对多的关系
 
数据源模拟

3. 根据用户的角色显示对应的权限
第一步：根据用户的sessionid信息获取其角色id;
第二步：根据role_id获得其权限的ids;
第三步：根据auth_ids获得权限的详情；
第四步：超级管理员拥有着绝对的权限；

当前权限的id等于父级权限id才做展示 
 
4. 给admin超级管理员开放全部权限
 二．权限数据维护
1. 角色数据维护
1.1 列表展示(添加、修改、删除)
这个详细的CRUD的操作方法没有讲，因为和前面的一样
 
 一步：获取角色的信息；

 1.2 给角色分配权限
1) 表单页面展示
 
 总结：
1. 模拟数据(auth、role、manager)
2. 根据模拟数据使得管理员登录系统显示对应的权限信息
管理员sessionid----->角色----->权限数据给获得出来
给admin管理员开放绝对权限
3. 维护角色数据
角色信息列表展示
分配权限的表单页面

2) 角色分配权限-收集表单信息
 
 需要拼装角色权限id,角色控制器&方法
 
3) 把已经拥有的权限给显示出来
利用了in_array这个PHP函数来处理
 
 
 
 
2. 权限数据维护
2.1 权限列表
 
 
 
 
 
2.2 添加权限
  
 
 

 

 
三. 翻墙访问权限
 

要对翻墙访问进行限制。
给后台所有控制器制作父类控制器：












 
 
   

四.禁止未登录系统用户访问
 
五.jquery在tp框架中使用
鼠标当前行高亮显示

 
 

总结：
1. 给角色分配权限
表单、收集表单信息
需要在RoleModel里边制作方法saveAuth()实现数据(role_auth_ids和role_auth_ac)的制作和存储
2. 权限的添加和展示
添加：其中auth_path和auth_level需要在model的saveData()方法里边给制作出来。具体执行insert和update两条语句

3. 用户翻墙访问控制
① 给普通的控制器制作新父类
② 在新父类的构造方法(先执行其本身父类的构造方法)中实现权限过滤
4. 未登陆用户禁止访问后台

作业：
1. 把角色、权限的修改、删除给完善起来
2. 给权限的级别扩展至第三个




